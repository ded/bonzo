/*!
  * Bonzo: DOM Utility (c) Dustin Diaz 2012
  * https://github.com/ded/bonzo
  * License MIT
  */
(function(e,t,n){typeof module!="undefined"&&module.exports?module.exports=t():typeof n["define"]=="function"&&n.define.amd?define(e,t):n[e]=t()})("bonzo",function(){function _(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function D(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n||e[r],e[r],r,e);return e}function P(e,t,n){for(var r=0,i=e.length;r<i;r++)q(e[r])&&(P(e[r].childNodes,t,n),t.call(n||e[r],e[r],r,e));return e}function H(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}function B(e){return e?e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase():e}function j(e){e[T]("data-node-uid")||e[x]("data-node-uid",++b);var t=e[T]("data-node-uid");return y[t]||(y[t]={})}function F(e){var t=e[T]("data-node-uid");t&&delete y[t]}function I(e){var t;try{return e===null||e===undefined?undefined:e==="true"?!0:e==="false"?!1:e==="null"?null:(t=parseFloat(e))==e?t:e}catch(n){}return undefined}function q(e){return e&&e.nodeName&&(e.nodeType==1||e.nodeType==11)}function R(e,t,n){for(var r=0,i=e.length;r<i;++r)if(t.call(n||null,e[r],r,e))return!0;return!1}function U(e){return e=="transform"&&(e=C.transform)||/^transform-?[Oo]rigin$/.test(e)&&(e=C.transform+"Origin")||e=="float"&&(e=C.cssFloat),e?H(e):null}function W(e,t,n){var r=0,o=t||this,u=[],a=s&&typeof e=="string"&&e.charAt(0)!="<"?s(e):e;return D(J(a),function(e){D(o,function(t){var s=!t[i]||t[i]&&!t[i][i]?function(){var e=t.cloneNode(!0),n,r;if(o.$&&typeof o.cloneEvents=="function"){o.$(e).cloneEvents(t),n=o.$(e).find("*"),r=o.$(t).find("*");for(var i=0;i<r.length;i++)o.$(n[i]).cloneEvents(r[i])}return e}():t;n(e,s),u[r]=s,r++})},this),D(u,function(e,t){o[t]=e}),o.length=r,o}function X(e,t,n){var r=Y(e),i=r.css("position"),s=r.offset(),o="relative",u=i==o,a=[parseInt(r.css("left"),10),parseInt(r.css("top"),10)];i=="static"&&(r.css("position",o),i=o),isNaN(a[0])&&(a[0]=u?0:e.offsetLeft),isNaN(a[1])&&(a[1]=u?0:e.offsetTop),t!=null&&(e.style.left=t-s.left+a[0]+S),n!=null&&(e.style.top=n-s.top+a[1]+S)}function V(e,t){return typeof t=="function"?t(e):t}function $(e){this.length=0;if(e){e=typeof e!="string"&&!e.nodeType&&typeof e.length!="undefined"?e:[e],this.length=e.length;for(var t=0;t<e.length;t++)this[t]=e[t]}}function J(e){return typeof e=="string"?Y.create(e):q(e)?[e]:e}function K(e,n,r){var i=this[0];return i?e==null&&n==null?(Q(i)?G():{x:i.scrollLeft,y:i.scrollTop})[r]:(Q(i)?t.scrollTo(e,n):(e!=null&&(i.scrollLeft=e),n!=null&&(i.scrollTop=n)),this):this}function Q(e){return e===t||/^(?:body|html)$/i.test(e.tagName)}function G(){return{x:t.pageXOffset||r.scrollLeft,y:t.pageYOffset||r.scrollTop}}function Y(e){return new $(e)}var e=this,t=window,n=t.document,r=n.documentElement,i="parentNode",s=null,o=/^(checked|value|selected)$/i,u=/^(select|fieldset|table|tbody|tfoot|td|tr|colgroup)$/i,a=["<table>","</table>",1],f=["<table><tbody><tr>","</tr></tbody></table>",3],l=["<select>","</select>",1],c=["_","",0,1],h={thead:a,tbody:a,tfoot:a,colgroup:a,caption:a,tr:["<table><tbody>","</tbody></table>",2],th:f,td:f,col:["<table><colgroup>","</colgroup></table>",2],fieldset:["<form>","</form>",1],legend:["<form><fieldset>","</fieldset></form>",2],option:l,optgroup:l,script:c,style:c,link:c,param:c,base:c},p=/^(checked|selected)$/,d=/msie/i.test(navigator.userAgent),v,m,g,y={},b=0,w=/^-?[\d\.]+$/,E=/^data-(.+)$/,S="px",x="setAttribute",T="getAttribute",N="getElementsByTagName",C=function(){var e=n.createElement("p");return e.innerHTML='<a href="#x">x</a><table style="float:left;"></table>',{hrefExtended:e[N]("a")[0][T]("href")!="#x",autoTbody:e[N]("tbody").length!==0,computedStyle:n.defaultView&&n.defaultView.getComputedStyle,cssFloat:e[N]("table")[0].style.styleFloat?"styleFloat":"cssFloat",transform:function(){var t=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],n;for(n=0;n<t.length;n++)if(t[n]in e.style)return t[n]}(),classList:"classList"in e,opasity:function(){return typeof n.createElement("a").style.opacity!="undefined"}()}}(),k=/(^\s*|\s*$)/g,L=/\s+/,A=String.prototype.toString,O={lineHeight:1,zoom:1,zIndex:1,opacity:1,boxFlex:1,WebkitBoxFlex:1,MozBoxFlex:1},M=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(k,"")},z=C.computedStyle?function(e,t){var r=null,i=n.defaultView.getComputedStyle(e,"");return i&&(r=i[t]),e.style[t]||r}:d&&r.currentStyle?function(e,t){if(t=="opacity"&&!C.opasity){var n=100;try{n=e.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(r){try{n=e.filters("alpha").opacity}catch(i){}}return n/100}var s=e.currentStyle?e.currentStyle[t]:null;return e.style[t]||s}:function(e,t){return e.style[t]};return C.classList?(v=function(e,t){return e.classList.contains(t)},m=function(e,t){e.classList.add(t)},g=function(e,t){e.classList.remove(t)}):(v=function(e,t){return _(t).test(e.className)},m=function(e,t){e.className=M(e.className+" "+t)},g=function(e,t){e.className=M(e.className.replace(_(t)," "))}),$.prototype={get:function(e){return this[e]||null},each:function(e,t){return D(this,e,t)},deepEach:function(e,t){return P(this,e,t)},map:function(e,t){var n=[],r,i;for(i=0;i<this.length;i++)r=e.call(this,this[i],i),t?t(r)&&n.push(r):n.push(r);return n},html:function(e,t){function i(t){D(J(e),function(e){t.appendChild(e)})}var n=t?r.textContent===undefined?"innerText":"textContent":"innerHTML";return typeof e!="undefined"?this.empty().each(function(r){!t&&u.test(r.tagName)?i(r):function(){try{r[n]=e}catch(t){i(r)}}()}):this[0]?this[0][n]:""},text:function(e){return this.html(e,!0)},append:function(e){return this.each(function(t){D(J(e),function(e){t.appendChild(e)})})},prepend:function(e){return this.each(function(t){var n=t.firstChild;D(J(e),function(e){t.insertBefore(e,n)})})},appendTo:function(e,t){return W.call(this,e,t,function(e,t){e.appendChild(t)})},prependTo:function(e,t){return W.call(this,e,t,function(e,t){e.insertBefore(t,e.firstChild)})},before:function(e){return this.each(function(t){D(Y.create(e),function(e){t[i].insertBefore(e,t)})})},after:function(e){return this.each(function(t){D(Y.create(e),function(e){t[i].insertBefore(e,t.nextSibling)})})},insertBefore:function(e,t){return W.call(this,e,t,function(e,t){e[i].insertBefore(t,e)})},insertAfter:function(e,t){return W.call(this,e,t,function(e,t){var n=e.nextSibling;n?e[i].insertBefore(t,n):e[i].appendChild(t)})},replaceWith:function(e){return this.deepEach(F),this.each(function(t){t.parentNode.replaceChild(Y.create(e)[0],t)})},addClass:function(e){return e=A.call(e).split(L),this.each(function(t){D(e,function(e){e&&!v(t,V(t,e))&&m(t,V(t,e))})})},removeClass:function(e){return e=A.call(e).split(L),this.each(function(t){D(e,function(e){e&&v(t,V(t,e))&&g(t,V(t,e))})})},hasClass:function(e){return e=A.call(e).split(L),R(this,function(t){return R(e,function(e){return e&&v(t,e)})})},toggleClass:function(e,t){return e=A.call(e).split(L),this.each(function(n){D(e,function(e){e&&(typeof t!="undefined"?t?m(n,e):g(n,e):v(n,e)?g(n,e):m(n,e))})})},show:function(e){return this.each(function(t){t.style.display=e||""})},hide:function(){return this.each(function(e){e.style.display="none"})},toggle:function(e,t){return this.each(function(e){e.style.display=e.offsetWidth||e.offsetHeight?"none":t||""}),e&&e(),this},first:function(){return Y(this.length?this[0]:[])},last:function(){return Y(this.length?this[this.length-1]:[])},next:function(){return this.related("nextSibling")},previous:function(){return this.related("previousSibling")},parent:function(){return this.related(i)},related:function(e){return this.map(function(t){t=t[e];while(t&&t.nodeType!==1)t=t[e];return t||0},function(e){return e})},focus:function(){return this.length&&this[0].focus(),this},blur:function(){return this.length&&this[0].blur(),this},css:function(e,r){function o(e,t,n){for(var r in s)if(s.hasOwnProperty(r)){n=s[r],(t=U(r))&&w.test(n)&&!(t in O)&&(n+=S);try{e.style[t]=V(e,n)}catch(i){}}}var i;if(r===undefined&&typeof e=="string")return r=this[0],r?r===n||r===t?(i=r===n?Y.doc():Y.viewport(),e=="width"?i.width:e=="height"?i.height:""):(e=U(e))?z(r,e):null:null;var s=e;return typeof e=="string"&&(s={},s[e]=r),d&&s.opacity&&(s.filter="alpha(opacity="+s.opacity*100+")",s.zoom=e.zoom||1,delete s.opacity),this.each(o)},offset:function(e,t){if(typeof e=="number"||typeof t=="number")return this.each(function(n){X(n,e,t)});if(!this[0])return{top:0,left:0,height:0,width:0};var r=this[0],i=r.offsetWidth,s=r.offsetHeight,o=r.offsetTop,u=r.offsetLeft;while(r=r.offsetParent)o+=r.offsetTop,u+=r.offsetLeft,r!=n.body&&(o-=r.scrollTop,u-=r.scrollLeft);return{top:o,left:u,height:s,width:i}},dim:function(){if(!this.length)return{height:0,width:0};var e=this[0],t=!e.offsetWidth&&!e.offsetHeight?function(t){var n={position:e.style.position||"",visibility:e.style.visibility||"",display:e.style.display||""};return t.first().css({position:"absolute",visibility:"hidden",display:"block"}),n}(this):null,n=e.offsetWidth,r=e.offsetHeight;return t&&this.first().css(t),{height:r,width:n}},attr:function(e,t){var n=this[0];if(typeof e=="string"||e instanceof String)return typeof t=="undefined"?n?o.test(e)?p.test(e)&&typeof n[e]=="string"?!0:n[e]:e!="href"&&e!="src"||!C.hrefExtended?n[T](e):n[T](e,2):null:this.each(function(n){o.test(e)?n[e]=V(n,t):n[x](e,V(n,t))});for(var r in e)e.hasOwnProperty(r)&&this.attr(r,e[r]);return this},removeAttr:function(e){return this.each(function(t){p.test(e)?t[e]=!1:t.removeAttribute(e)})},val:function(e){return typeof e=="string"?this.attr("value",e):this.length?this[0].value:null},data:function(e,t){var n=this[0],r,i,s;return typeof t=="undefined"?n?(i=j(n),typeof e=="undefined"?(D(n.attributes,function(e){(s=(""+e.name).match(E))&&(i[H(s[1])]=I(e.value))}),i):(typeof i[e]=="undefined"&&(i[e]=I(this.attr("data-"+B(e)))),i[e])):null:this.each(function(n){j(n)[e]=t})},remove:function(){return this.deepEach(F),this.each(function(e){e[i]&&e[i].removeChild(e)})},empty:function(){return this.each(function(e){P(e.childNodes,F);while(e.firstChild)e.removeChild(e.firstChild)})},detach:function(){return this.each(function(e){e[i].removeChild(e)})},scrollTop:function(e){return K.call(this,null,e,"y")},scrollLeft:function(e){return K.call(this,e,null,"x")}},Y.setQueryEngine=function(e){s=e,delete Y.setQueryEngine},Y.aug=function(e,t){for(var n in e)e.hasOwnProperty(n)&&((t||$.prototype)[n]=e[n])},Y.create=function(e){return typeof e=="string"&&e!==""?function(){var t=/^\s*<([^\s>]+)/.exec(e),r=n.createElement("div"),s=[],o=t?h[t[1].toLowerCase()]:null,u=o?o[2]+1:1,a=o&&o[3],f=i,l=C.autoTbody&&o&&o[0]=="<table>"&&!/<tbody/i.test(e);r.innerHTML=o?o[0]+e+o[1]:e;while(u--)r=r.firstChild;a&&r&&r.nodeType!==1&&(r=r.nextSibling);do(!t||r.nodeType==1)&&(!l||r.tagName.toLowerCase()!="tbody")&&s.push(r);while(r=r.nextSibling);return D(s,function(e){e[f]&&e[f].removeChild(e)}),s}():q(e)?[e.cloneNode(!0)]:[]},Y.doc=function(){var e=Y.viewport();return{width:Math.max(n.body.scrollWidth,r.scrollWidth,e.width),height:Math.max(n.body.scrollHeight,r.scrollHeight,e.height)}},Y.firstChild=function(e){for(var t=e.childNodes,n=0,r=t&&t.length||0,i;n<r;n++)t[n].nodeType===1&&(i=t[r=n]);return i},Y.viewport=function(){return{width:d?r.clientWidth:self.innerWidth,height:d?r.clientHeight:self.innerHeight}},Y.isAncestor="compareDocumentPosition"in r?function(e,t){return(e.compareDocumentPosition(t)&16)==16}:"contains"in r?function(e,t){return e!==t&&e.contains(t)}:function(e,t){while(t=t[i])if(t===e)return!0;return!1},Y},this)